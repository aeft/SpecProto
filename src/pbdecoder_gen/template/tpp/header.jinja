#ifndef __{{ proto_file_prefix.upper() }}_TPP_H__
#define __{{ proto_file_prefix.upper() }}_TPP_H__
#include <iostream>
#include <string>
#include <vector>

#include "{{ proto_file_prefix }}.pb.h"
#include "../../src/cpp/lib.h"

namespace {{ namespace }} {

{% for message_name, fields in messages.items() %}
static std::unordered_set<uint32_t> ValidTags_{{ message_name }} = { {{- valid_tags(fields) | join(', ') -}} };
{%- endfor %}

using range = std::pair<uint32_t, uint32_t>;

{% for name in messages.keys() %}
class {{ name }};
{%- endfor %}

{% for message_name, fields in messages.items() %}
class {{ message_name }} {
   public:
    {%- for field in fields %}
    {{ field.cpp_type }} {{ field.name }};
    {%- endfor %}
    {{ message_name }}();
    ~{{ message_name }}();
    bool Parse(ByteStream&);
    bool ParseInParallel(ByteStream&);
    PB::{{ message_name }}* ConvertToPB(PB::{{ message_name }}*);
};
{%- endfor %}

}
#endif